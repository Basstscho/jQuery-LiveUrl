<!DOCTYPE html>
<html lang="de">
    <head>

        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

        <meta name="description" content="" />
        <meta name="author" content="Stephan Fischer" />
        
        
        <title>Live Url</title>

        <link rel="stylesheet" href="liveurl.css" />
    </head>
    <body>
          
        <textarea style="width: 300px; height: 100px;" placeholder="write here"> </textarea>
        <div class="liveurl-loader"> </div>
        
        <div class="liveurl">
            <div class="close" title="Entfernen"></div>
            <div class="inner">
                <span class="image"> </span>
                <div class="details">
                    <span class="title"> </span>
                    <span class="description"> </span> 
                    <span class="url"> </span>
                    
                    <div class="thumbnail">
                        <input type="checkbox" name="no_picture" id="un6qfpc1">
                        <label for="un6qfpc1">Kein Miniaturbild</label>
                    </div>
                   
                </div>
                <div class="video">
                    
                </div>
            </div>
        </div>

            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" > </script>
            <script src="jquery.liveurl.js"> </script>
            <script> 
                $('textarea').liveUrl({
                    loadStart : function(){
                        $('.liveurl-loader').show();
                    },
                    loadEnd : function(){
                        $('.liveurl-loader').hide();
                    },
                    success : function(data) 
                    {                        
                        var output = $('.liveurl');
                        output.find('.title').text(data.title);
                        output.find('.description').text(data.description);
                        output.find('.url').text(data.url);
                        output.find('.image').empty();
                        
                        output.find('.close').one('click', function() {
                            $(this).parent().hide('fast');
                            $(this).parent().find('.video').html('');
                            $('textarea').trigger('clear'); 
                        });
                        
                        output.show('fast');
                        
                        if (data.video != null) {

                            var ratioW        = data.video.width  /200;
                            data.video.width  = 200;
                            data.video.height = data.video.height / ratioW;
        
                            var video = 
                            '<object width="' + data.video.width  + '" height="' + data.video.height  + '">' +
                                '<param name="movie"' +
                                      'value="' + data.video.file  + '"></param>' +
                                '<param name="allowScriptAccess" value="always"></param>' +
                                '<embed src="' + data.video.file  + '"' +
                                      'type="application/x-shockwave-flash"' +
                                      'allowscriptaccess="always"' +
                                      'width="' + data.video.width  + '" height="' + data.video.height  + '"></embed>' +
                            '</object>';
                            output.find('.video').html(video);
                            
                         
                        }
                    },
                    addImage : function(image)
                    {
                        var output = $('.liveurl');
                        output.find('.image').prepend($(image));
                    }
              });
          </script>
    </body>
</html>
